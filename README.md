<p align="center">
  <img src="./img/LOGO1.png" alt="Logo" height="100px"/>
  <img src="./img/LOGO2.png" alt="Logo" height="80px"/>
</p>

<p align="center">
        ğŸ¤— <a href="https://huggingface.co/NAUSCS/Qwen-Audit">Hugging Face</a>
         &nbsp&nbsp | &nbsp&nbsp
        ğŸ¤– <a href="https://www.modelscope.cn/models/NAUSCS/AuditWen">ModelScope</a>
         <!-- &nbsp&nbsp | &nbsp&nbsp
        ğŸ§ <a herf="">QQ</a> -->
<br>
</p>


ğŸˆæœ¬é¡¹ç›®ç”±å¼€æºæ¨¡å‹â€œé€šä¹‰åƒé—®â€(Tongyi Qwen)å¾®è°ƒç”Ÿæˆï¼Œè¯¦ç»†è¯·æŸ¥çœ‹[Notice](./Notice)æ–‡ä»¶



## é¡¹ç›®ç®€ä»‹

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬é¡¹ç›®æ—¨åœ¨ä»¥å®¡è®¡è¡Œä¸šçš„å®é™…åº”ç”¨éœ€æ±‚ä¸ºå¯¼å‘ï¼Œå‡ç»ƒå®¡è®¡æ™ºèƒ½åŒ–ä»»åŠ¡çš„éœ€æ±‚å¹¶è½¬åŒ–ä¸ºå¤§æ¨¡å‹ä»»åŠ¡åˆ—è¡¨ã€‚é€šè¿‡æ”¶é›†å’Œæ•´ç†å®¡è®¡é¢†åŸŸé«˜è´¨é‡æ•°æ®é›†å’Œå¾®è°ƒä»»åŠ¡æŒ‡ä»¤æ•°æ®é›†ï¼ŒåŸºäºé¢†åŸŸæ•°æ®çš„ç»§ç»­é¢„è®­ç»ƒå’Œå¾®æŒ‡ä»¤è°ƒæ„å»ºä¸€ä¸ªæœåŠ¡äºå®¡è®¡é¢†åŸŸçš„å¤§è¯­è¨€æ¨¡å‹ï¼Œå¹¶ç»“åˆå®¡è®¡é¢†åŸŸçŸ¥è¯†ä¸æ•°æ®ï¼Œåœ¨å¤§æ¨¡å‹æ¨ç†é˜¶æ®µä½¿ç”¨å¤šç§çŸ¥è¯†å¢å¼ºæ–¹å¼å®ç°å¯¹å¤æ‚å®¡è®¡é—®é¢˜çš„ç†è§£ä¸å›ç­”ã€‚

### èƒŒæ™¯


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®¡è®¡æ˜¯æ ¹æ®å›½å®¶æ³•è§„å’Œå®¡è®¡å‡†åˆ™ï¼Œç”±å›½å®¶æˆæƒæˆ–å—å§”æ‰˜çš„ä¸“ä¸šæœºæ„å’Œäººå‘˜è¿›è¡Œçš„ç‹¬ç«‹ç»æµç›‘ç£æ´»åŠ¨ï¼Œæ—¨åœ¨å®¡æŸ¥å’Œç›‘ç£è¢«å®¡è®¡å•ä½çš„è´¢æ”¿ã€è´¢åŠ¡æ”¶æ”¯ã€ç»è¥ç®¡ç†æ´»åŠ¨åŠç›¸å…³èµ„æ–™çš„çœŸå®æ€§ã€æ­£ç¡®æ€§ã€åˆè§„æ€§ã€åˆæ³•æ€§å’Œæ•ˆç›Šæ€§ï¼Œå¹¶è¯„ä»·ç»æµè´£ä»»ï¼Œé‰´è¯ç»æµä¸šåŠ¡ã€‚<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¿‘å¹´æ¥ï¼Œéšç€å®¡è®¡ä¿¡æ¯åŒ–çš„å‘å±•ï¼Œå®¡è®¡æ•°æ®åŸºç¡€å’Œæ–¹å¼æ­£åœ¨å—åˆ°å¤§æ•°æ®çš„å½±å“ï¼Œå®¡è®¡å¯¹è±¡äº§ç”Ÿçš„æ•°æ®é‡æ—¥ç›Šåºå¤§ï¼Œå¯¹ç°æœ‰æ•°æ®åŸºç¡€å’Œå®¡è®¡æ–¹æ³•æå‡ºäº†æ–°æŒ‘æˆ˜ã€‚åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œæ¨è¿›ä»¥å¤§æ•°æ®ä¸ºæ ¸å¿ƒçš„å®¡è®¡ä¿¡æ¯åŒ–å»ºè®¾ï¼Œæ„å»ºå¤§æ•°æ®å®¡è®¡å·¥ä½œæ¨¡å¼ï¼Œç§¯æå¼€å±•å®¡è®¡å¤§æ•°æ®çš„ç»¼åˆåˆ©ç”¨è‡³å…³é‡è¦ã€‚åœ¨æ™ºèƒ½å®¡è®¡ç†è®ºæ¢ç´¢æ–¹é¢ï¼Œæ„å»ºå®¡è®¡çŸ¥è¯†åº“å¹¶èå…¥æ•°å­—åŒ–ç”šè‡³æ™ºèƒ½åŒ–å®¡è®¡è¿‡ç¨‹å¯ä»¥é™ä½æ£€æŸ¥é£é™©ã€æ‰©å¤§ä¸šåŠ¡è¦†ç›–èŒƒå›´ï¼Œå‘ç°æ›´å¤šæ½œåœ¨é£é™©ä¸é—®é¢˜ï¼Œæå‡å®¡è®¡å·¥ä½œæ•ˆç‡ã€‚å¤§æ•°æ®å®¡è®¡å’Œæ™ºèƒ½å®¡è®¡å·²æˆä¸ºå®¡è®¡å‘å±•çš„ä¸»æµæ–¹å‘ï¼Œå®¡è®¡æ™ºèƒ½ä¸“å®¶æ¦‚å¿µçš„æå‡ºè¡¨æ˜å®¡è®¡å·¥ä½œæ­£åœ¨ä»è‡ªåŠ¨åŒ–è½¬å‘æ™ºèƒ½åŒ–ã€‚<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç„¶è€Œï¼Œåœ¨å®¡è®¡æŠ€æœ¯æ–¹æ³•ä¸å®è·µæ–¹é¢ï¼Œç›®å‰å®¡è®¡æ•°æ®æŒ–æ˜ä¸»è¦é‡‡ç”¨ç°æœ‰æ–‡æœ¬/æ•°æ®æŒ–æ˜ç®—æ³•ï¼Œè¾ƒå°‘å°†äººå·¥æ™ºèƒ½æŠ€æœ¯ä¸å®¡è®¡é¢†åŸŸæ·±å…¥ç»“åˆï¼Œç¼ºä¹äººå·¥æ™ºèƒ½æŠ€æœ¯èµ‹èƒ½å®¡è®¡è¡Œä¸šçš„ç ”ç©¶ã€‚

### ç‰¹æ€§

- **ä¸“ä¸šçš„æ™ºèƒ½å®¡è®¡çŸ¥è¯†é—®ç­”ï¼š** å¯¹äºç”¨æˆ·è¾“å…¥çš„é—®é¢˜ï¼ŒAuditWenå°†æ™ºèƒ½ç”Ÿæˆç­”æ¡ˆï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³å®¡è®¡é¢†åŸŸçš„é—®é¢˜ã€‚
- **æé«˜å·¥ä½œæ•ˆç‡ï¼š** åœ¨AuditWençš„å¸®åŠ©ä¸‹ï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«é€Ÿåœ°è§£å†³é—®é¢˜ï¼Œæé«˜å·¥ä½œæ•ˆç‡ï¼ŒèŠ‚çœå®¡è®¡äººå‘˜çš„æ—¶é—´å’Œç²¾åŠ›ã€‚
- **ç”¨æˆ·ä¸ªæ€§åŒ–å†å²è®°å½•ï¼š** ç”¨æˆ·ç™»å½•åä»…å¯æŸ¥çœ‹è‡ªå·±çš„å†å²è®°å½•ï¼Œä¿è¯ç”¨æˆ·éšç§ï¼ŒåŒæ—¶æä¾›ä¸ªæ€§åŒ–çš„ä½¿ç”¨ä½“éªŒã€‚
- **ä¿æŠ¤ä¼ä¸šéšç§ï¼š** æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼Œå³å¯ä»¥åœ¨ä¼ä¸šå†…éƒ¨çš„ç§æœ‰æœåŠ¡å™¨ä¸Šæ­å»ºå’Œè¿è¡Œï¼Œæœ‰æ•ˆä¿æŠ¤ä¼ä¸šéšç§ã€‚
- **ç”¨æˆ·èº«ä»½éªŒè¯ï¼š** ç³»ç»Ÿæä¾›ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½ï¼Œç¡®ä¿åªæœ‰ç»è¿‡æˆæƒçš„ç”¨æˆ·æ‰èƒ½è®¿é—®ç³»ç»Ÿï¼Œè¿›ä¸€æ­¥ä¿éšœæ•°æ®å®‰å…¨ã€‚


### æ–°é—»
- 2024.03 æ­£å¼å‘å¸ƒå®¡è®¡å¤§è¯­è¨€æ¨¡å‹AuditWenï¼Œå¹¶åŒæ­¥ä¸Šä¼ HuggingFaceåŠé­”æ­ç¤¾åŒºï¼ˆModelScopeï¼‰ã€‚

### è¯„æµ‹è¡¨ç°
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AuditWenæ¨¡å‹ç›¸æ¯”äºå¾®è°ƒå‰æ¨¡å‹ï¼ˆQwen-7b-chatï¼‰å®ç°äº†æ˜¾è‘—æå‡

<!--------------TODO---------------->

## éƒ¨ç½²è¯´æ˜

### è¦æ±‚
- NVIDIA 16G åŠä»¥ä¸Šæ˜¾å­˜æ˜¾å¡
- python 3.8 åŠä»¥ä¸Šç‰ˆæœ¬
- pytorch 2.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼ˆå»ºè®®å‰å¾€[pytorchå®˜ç½‘](https://pytorch.org/)é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬å®‰è£…ï¼‰
- transformers 4.32åŠä»¥ä¸Šç‰ˆæœ¬
- CUDA 11.7åŠä»¥ä¸Šç‰ˆæœ¬
- SQLserver 2008åŠä»¥ä¸Šç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰


### å¿«é€Ÿä½¿ç”¨


ç¡®ä¿ä½ æ»¡è¶³ä¸Šè¿°è¦æ±‚ï¼Œç„¶åå®‰è£…ç›¸å…³çš„ä¾èµ–åº“ã€‚
```bash
pip install -r requirements.txt
```


â˜‘ï¸ ï¼ˆå¯é€‰ï¼‰å¦‚æœä½ çš„æ˜¾å¡æ”¯æŒfp16æˆ–bf16ç²¾åº¦ï¼Œå¯å®‰è£…[flash-attention](https://github.com/Dao-AILab/flash-attention)æ¥æé«˜ä½ çš„è¿è¡Œæ•ˆç‡å¹¶é™ä½æ˜¾å­˜å ç”¨ã€‚(å®‰è£…è¿‡ç¨‹å¯èƒ½è¾ƒæ…¢)

```bash
pip install ninja wheel
git clone https://github.com/Dao-AILab/flash-attention
cd flash-attention
git submodule update --init --recursive
python setup.py install
# ä¸‹æ–¹å®‰è£…å¯é€‰ï¼Œå®‰è£…å¯èƒ½æ¯”è¾ƒç¼“æ…¢ã€‚
pip install csrc/layer_norm
# å¦‚æœflash-attnç‰ˆæœ¬é«˜äº2.1.1ï¼Œä¸‹æ–¹æ— éœ€å®‰è£…ã€‚
pip install csrc/rotary
```

ä» ğŸ¤— [HuggingFace](https://huggingface.co/NAUSCS/Qwen-Audit) æˆ– ğŸ¤– [ModelScope](https://www.modelscope.cn/models/NAUSCS/AuditWen) ä¸‹è½½æˆ‘ä»¬çš„æ¨¡å‹åŸºåº§

```bash
git lfs install
# HuggingFace
git clone https://huggingface.co/NAUSCS/Qwen-Audit.git
# ModelScope
git clone https://www.modelscope.cn/models/NAUSCS/AuditWen.git
```

#### éƒ¨ç½²

ä¿®æ”¹[main.py](main.py)ä¸­çš„å‚æ•°åè¿è¡Œæ­¤æ–‡ä»¶

```python
checkpoint_path = "AuditWen"  # æ¨¡å‹çš„è·¯å¾„
server_port = 8000  # æœåŠ¡å™¨çš„ç«¯å£å·
server_name = "localhost"  # æœåŠ¡å™¨çš„åç§°
```

éšåæ‰“å¼€webæ–‡ä»¶å¤¹å†…çš„[index.html](web/index.html)å³å¯å¼€å§‹å¯¹è¯

#### å¯é€‰åŠŸèƒ½

##### å±€åŸŸç½‘éƒ¨ç½²
ä¿®æ”¹[main.py](main.py)ä¸­çš„server_nameä¸º"0.0.0.0"åè¿è¡Œæ­¤æ–‡ä»¶

å±€åŸŸç½‘ä¸­çš„ç”¨æˆ·å¯é€šè¿‡http://<æœåŠ¡å™¨åŸŸå>:8000/index.htmlä¸æœåŠ¡å™¨äº¤äº’

##### æ•°æ®åº“


âš ï¸ è¯·æ³¨æ„ï¼è¯¥æ“ä½œéœ€ç¡®ä¿æœåŠ¡å™¨ä¸­SQL Serverå·²æ­£ç¡®è¿è¡Œ

ä¿®æ”¹[main.py](main.py)ä¸­çš„å‚æ•°åè¿è¡Œæ­¤æ–‡ä»¶

```python
sql = True  # æ˜¯å¦ä½¿ç”¨ SQL æ•°æ®åº“
```
åœ¨SQL Serverä¸­åˆ›å»ºåä¸º"AuditWenâ€å’Œ"project"æ•°æ®åº“ç”¨äºå­˜æ”¾ç”¨æˆ·ä¿¡æ¯ï¼Œ
å¹¶åœ¨"AuditWen"æ•°æ®åº“ä¸­æ–°å»ºæŸ¥è¯¢ï¼Œè¿è¡Œä»¥ä¸‹ä»£ç ï¼š
```sql
-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    Username NVARCHAR(50),
    Password NVARCHAR(50)
);

-- åˆ›å»ºé—®é¢˜ç»„è¡¨
CREATE TABLE QuestionGroups (
    GroupID INT PRIMARY KEY,
    UserID INT,
    Time DATETIME,
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

-- åˆ›å»ºé—®é¢˜é›†è¡¨
CREATE TABLE QuestionSets (
    SetID INT PRIMARY KEY,
    GroupID INT,
    QuestionID INT,
    Question TEXT ,
    Answer TEXT , 
    FOREIGN KEY (GroupID) REFERENCES QuestionGroups(GroupID)
);
```
è¿è¡ŒæˆåŠŸåä¼šåˆ›å»ºç”¨æˆ·è¡¨Usersã€é—®é¢˜ç»„è¡¨QuestionGroupså’Œé—®é¢˜é›†è¡¨QuestionSets


##### CPUï¼ˆä¸æ¨èï¼‰

ä¿®æ”¹[main.py](main.py)ä¸­çš„cpu_onlyå‚æ•°ä¸º**True**

```python
cpu_only = True  # æ˜¯å¦åªä½¿ç”¨ CPU
```


### é—®é¢˜
å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·è€ƒè™‘å‚è€ƒ[FAQæ–‡ä»¶](FAQ.md)ã€[issueåŒº]()ä»¥åŠ[Qwené¡¹ç›®](https://github.com/QwenLM/Qwen)ã€‚å¦‚ä»æ— æ³•è§£å†³ï¼Œè¯·åœ¨issueåŒºè¯¦ç»†è¯´æ˜æ‚¨çš„é—®é¢˜

## å¼•ç”¨
&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœä½ è§‰å¾—æˆ‘ä»¬çš„å·¥ä½œå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å¼•ç”¨ï¼

```
@article{AuditWen,
  title={AuditWen: An Open-Source Large Language Model for Audit},
  author={},
  year={2024}
}
```

## ä½¿ç”¨åè®®
### Qwen
- Tongyi Qianwen is licensed under the Tongyi Qianwen LICENSE AGREEMENT, Copyright (c) Alibaba Cloud. All Rights Reserved.

### AuditWen

- æœ¬é¡¹ç›®ç›¸å…³èµ„æºä»…ä¾›å­¦æœ¯ç ”ç©¶ä¹‹ç”¨ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”ã€‚
- ä½¿ç”¨æ¶‰åŠç¬¬ä¸‰æ–¹ä»£ç çš„éƒ¨åˆ†æ—¶ï¼Œè¯·ä¸¥æ ¼éµå¾ªç›¸åº”çš„å¼€æºåè®®ã€‚
- æ¨¡å‹ç”Ÿæˆçš„å†…å®¹å—æ¨¡å‹è®¡ç®—ã€éšæœºæ€§ç­‰å› ç´ å½±å“ï¼Œæœ¬é¡¹ç›®æ— æ³•å¯¹å…¶å‡†ç¡®æ€§ä½œå‡ºä¿è¯ã€‚
- å¯¹äºæ¨¡å‹è¾“å‡ºçš„ä»»ä½•å†…å®¹ï¼Œæœ¬é¡¹ç›®ä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹è´£ä»»ï¼Œäº¦ä¸å¯¹å› ä½¿ç”¨ç›¸å…³èµ„æºå’Œè¾“å‡ºç»“æœè€Œå¯èƒ½äº§ç”Ÿçš„ä»»ä½•æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚

## è‡´è°¢
æœ¬é¡¹ç›®å‚è€ƒäº†ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼Œåœ¨æ­¤å¯¹ç›¸å…³é¡¹ç›®å’Œç ”ç©¶å¼€å‘äººå‘˜è¡¨ç¤ºæ„Ÿè°¢ã€‚
- é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ï¼šhttps://github.com/QwenLM/Qwen
```
@article{qwen,
  title={Qwen Technical Report},
  author={Jinze Bai and Shuai Bai and Yunfei Chu and Zeyu Cui and Kai Dang and Xiaodong Deng and Yang Fan and Wenbin Ge and Yu Han and Fei Huang and Binyuan Hui and Luo Ji and Mei Li and Junyang Lin and Runji Lin and Dayiheng Liu and Gao Liu and Chengqiang Lu and Keming Lu and Jianxin Ma and Rui Men and Xingzhang Ren and Xuancheng Ren and Chuanqi Tan and Sinan Tan and Jianhong Tu and Peng Wang and Shijie Wang and Wei Wang and Shengguang Wu and Benfeng Xu and Jin Xu and An Yang and Hao Yang and Jian Yang and Shusheng Yang and Yang Yao and Bowen Yu and Hongyi Yuan and Zheng Yuan and Jianwei Zhang and Xingxuan Zhang and Yichang Zhang and Zhenru Zhang and Chang Zhou and Jingren Zhou and Xiaohuan Zhou and Tianhang Zhu},
  journal={arXiv preprint arXiv:2309.16609},
  year={2023}
}
```

- PIXIUï¼šhttps://github.com/The-FinAI/PIXIU
```
@misc{xie2024FinBen,
      title={The FinBen: An Holistic Financial Benchmark for Large Language Models}, 
      author={Qianqian Xie and Weiguang Han and Zhengyu Chen and Ruoyu Xiang and Xiao Zhang and Yueru He and Mengxi Xiao and Dong Li and Yongfu Dai and Duanyu Feng and Yijing Xu and Haoqiang Kang and Ziyan Kuang and Chenhan Yuan and Kailai Yang and Zheheng Luo and Tianlin Zhang and Zhiwei Liu and Guojun Xiong and Zhiyang Deng and Yuechen Jiang and Zhiyuan Yao and Haohang Li and Yangyang Yu and Gang Hu and Jiajia Huang and Xiao-Yang Liu and Alejandro Lopez-Lira and Benyou Wang and Yanzhao Lai and Hao Wang and Min Peng and Sophia Ananiadou and Jimin Huang},
      year={2024},
      eprint={2402.12659},
      archivePrefix={arXiv},
      primaryClass={cs.CL}
}
```
- LLaMA-Factoryï¼šhttps://github.com/hiyouga/LLaMA-Factory
```
@article{zheng2024llamafactory,
  title={LlamaFactory: Unified Efficient Fine-Tuning of 100+ Language Models}, 
  author={Yaowei Zheng and Richong Zhang and Junhao Zhang and Yanhan Ye and Zheyan Luo and Yongqiang Ma},
  journal={arXiv preprint arXiv:2403.13372},
  year={2024},
  url={http://arxiv.org/abs/2403.13372}
}
```